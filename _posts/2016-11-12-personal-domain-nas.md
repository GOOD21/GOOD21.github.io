---
layout:     post
title:      "自定义域名绑定NAS"
date:       2016-11-12
author:     "GOOD21"
header-img: "img/post-bg-js-module.jpg"
tags:
    - 生活
    - NAS
---

Synology NAS 提供了系统自带的外网访问功能：**QuickConnect**，你可以很简单的在外网通过浏览器访问：`http://quickconnect.to/YOURID` 的方式链接到NAS中。

然而，这域名是在是太恶心了，作为一个域名强迫症患者，一定要绑定上自己的域名，嗯。

先科普一下，一般家用的网络都不是固定ip，所以没办法用A记录解析，只能申请DDNS（动态域名解析），Synology 提供免费的DDNS，国内还有花生壳等也免费提供。

-------

#### 自定义域名

##### 1、花生壳

Synology 在 DSM 里提供了花生壳的客户端，可以让花生壳的DDNS解析到你的内网（*如果你家的运营商 IP 本身就是个内网 IP 的话，就只能用这种办法了）*。

优点：傻瓜式服务，配置简单，花生壳有**销售支持妹子**会给你打电话帮你解决问题。

缺点：我测试的结果**客户端不稳定，经常掉线**；如果你的域名是在花生壳买的话，可以免费用解析，但是如果你是在别家的域名，那么解析是**收费**的，70￥/年，如果你不想花这个钱，还有办法，就是把域名转到花生壳，呵呵呵呵呵呵。

##### 2、直接外网访问你家路由器（推荐）

一般家里的猫都是本身拨号然后路由出去的，所以你没办法控制外网访问你家的端口关系。这时候就需要**破解光猫**了。

我家的光猫型号应该最TM难弄的那种，**华为HG8346R**，我照着  [http://post.smzdm.com/p/441624/](http://post.smzdm.com/p/441624/)  捣鼓了好久也没搞定（也怕捣鼓坏了，一直处处截图留念），费死劲了，都是泪。所以**建议直接淘宝**吧，30-50块，他们挺专业的，远程控制，大概20分钟搞定。

那么此时，就可以**桥接到自己路由器**上，然后**用路由器拨号**了。

关于**端口映射**，我家的是Airport Extreme，直接可以通过EZ-Internet 设置端口映射，这就按需来就行。（这里要注意的一点是 Synology NAS 内网貌似不支持10.0段，所以需要配成192.168段才行）

![p1](/img/in-post/personal-domain-nas/p1.png)

配置好DDNS之后，直接用自己的域名**CNAME到DDNS主机名称**就行了。

优点：**免费**、**稳定**。

缺点：折腾，对**外网暴露的部分端口**。

#### HTTPS

毕竟家庭网络暴露在外面，心里多多少少还是不安的，所以上HTTPS吧。

可以去Starssl 申请到**免费**的个人SSL，**3年一续**。

证书传到DSM之后，把默认的Synology.com删掉就行，开启**HSTS**，默认走https。


![p2](/img/in-post/personal-domain-nas/p2.png)


搞定之后，神清气爽！安心睡觉去了。


